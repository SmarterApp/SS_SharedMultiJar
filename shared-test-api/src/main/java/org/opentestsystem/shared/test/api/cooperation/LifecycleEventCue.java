/*******************************************************************************
 * Educational Online Test Delivery System 
 * Copyright (c) 2014 American Institutes for Research
 *   
 * Distributed under the AIR Open Source License, Version 1.0 
 * See accompanying file AIR-License-1_0.txt or at
 * http://www.smarterapp.org/documents/American_Institutes_for_Research_Open_Source_Software_License.pdf
 ******************************************************************************/
package org.opentestsystem.shared.test.api.cooperation;

import java.lang.Thread.State;

public class LifecycleEventCue extends Cue
{
  public static final String TAG = "LIFECYCLE_EVENT";

  public enum EventType {
    JOINED_STAGE,
    LEFT_STAGE,
    STARTED_SCRIPT,
    COMPLETED_SCRIPT,
    SCRIPT_ERROR
  }

  private final State     _threadState;
  private final Throwable _throwable;
  private final EventType _eventType;
  private final String    _scriptName;
  private final String    _threadName;

  public LifecycleEventCue (CooperativeInteractiveUser<?,?> user, EventType eventType) {
    this (user, eventType, null, null, null);
  }

  public LifecycleEventCue (CooperativeInteractiveUser<?,?> user, EventType eventType, String scriptName, String threadName) {
    this (user, eventType, scriptName, threadName, null);
  }

  public LifecycleEventCue (CooperativeInteractiveUser<?,?> user,
      EventType eventType,
      String scriptName,
      String threadName,
      Throwable throwable) {
    super (TAG, user, false);
    _threadState = user.getThreadState ();
    _throwable = throwable;
    _eventType = eventType;
    _scriptName = scriptName;
    _threadName = threadName;
  }

  @Override
  public CooperativeInteractiveUser<?,?> getData () {
    return (CooperativeInteractiveUser<?,?>) super.getData ();
  }

  public State getThreadState () {
    return _threadState;
  }

  public Throwable getThrowable () {
    return _throwable;
  }

  public EventType getEventType () {
    return _eventType;
  }
  
  public String getScriptName() {
    return _scriptName;
  }
  
  public String getThreadName() {
    return _threadName;
  }

}
