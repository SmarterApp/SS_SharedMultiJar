/*************************************************************************
 * Educational Online Test Delivery System
 * Copyright (c) 2014 American Institutes for Research
 *
 * Distributed under the AIR Open Source License, Version 1.0
 * See accompanying file AIR-License-1_0.txt or at 
 * https://bitbucket.org/sbacoss/eotds/wiki/AIR_Open_Source_License
 *************************************************************************/

package org.opentestsystem.shared.trapi;


import javax.annotation.PostConstruct;

import org.opentestsystem.shared.trapi.exception.TrApiResponseErrorHandler;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpMethod;
import org.springframework.http.ResponseEntity;
import org.springframework.security.oauth2.client.OAuth2RestTemplate;

/**
 * @author jmambo
 *
 */
public class TrOauthRestApiClient implements ITrRestApiClient
{
  
  private OAuth2RestTemplate _restTemplate;
  
  public TrOauthRestApiClient(OAuth2RestTemplate restTemplate) {
    _restTemplate = restTemplate;
  }

  
  @PostConstruct
  public void init() {
    _restTemplate.setErrorHandler(new TrApiResponseErrorHandler());
  }
     
  @Override
  public <T> ResponseEntity<T> exchange(String apiUrl, HttpMethod method, HttpEntity<?> requestEntity, Class<T> responseType) {
    return _restTemplate.exchange (apiUrl, method, requestEntity, responseType);
  }
  
}
